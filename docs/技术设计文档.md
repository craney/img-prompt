# ImagePrompt.He æŠ€æœ¯è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£æ€»ç»“äº† ImagePrompt.He é¡¹ç›®çš„æŠ€æœ¯è®¾è®¡é€»è¾‘ï¼Œæ•´åˆäº†äº§å“è¿­ä»£v1ã€v2å’Œv3çš„æŠ€æœ¯æ–¹æ¡ˆå’Œå®ç°ã€‚

## è¿­ä»£ç‰ˆæœ¬å†å²ä¸æŠ€æœ¯æ¼”è¿›

### v1.0 - è®¤è¯ç³»ç»ŸåŸºç¡€æ¶æ„é‡æ„
**æ ¸å¿ƒå˜æ›´**ï¼š
- å°†è®¤è¯ç³»ç»Ÿä» Clerk è¿ç§»è‡³ NextAuth.js
- é‡æ„æ•°æ®åº“è¿æ¥é…ç½®ï¼Œè§£å†³è¿æ¥å­—ç¬¦ä¸²é—®é¢˜
- å®ç° GitHub OAuth å’Œ Email Magic Link è®¤è¯æ–¹å¼

**æŠ€æœ¯å®ç°**ï¼š

#### 1. æ•°æ®åº“è¿æ¥é‡æ„
**æ–‡ä»¶**ï¼š`packages/db/index.ts`
```
// ä¿®æ”¹å‰
import { createKysely } from "@vercel/postgres-kysely";
export const db = createKysely<DB>();

// ä¿®æ”¹å
import { createClient } from "@vercel/postgres";
import { Kysely, PostgresDialect } from "kysely";

const client = createClient({
  connectionString: process.env.POSTGRES_URL,
});

export const db = new Kysely<DB>({
  dialect: new PostgresDialect({
    pool: client as any,
  }),
});
```

#### 2. NextAuth é…ç½®å®ç°
**æ–°å¢æ–‡ä»¶**ï¼š`packages/auth/nextauth.ts`
```
import { NextAuthOptions } from "next-auth";
import { KyselyAdapter } from "@auth/kysely-adapter";
import GitHubProvider from "next-auth/providers/github";
import EmailProvider from "next-auth/providers/email";

export const authOptions: NextAuthOptions = {
  session: { strategy: "jwt" },
  pages: { signIn: "/login" },
  adapter: KyselyAdapter(db),
  providers: [
    GitHubProvider({
      clientId: env.GITHUB_CLIENT_ID,
      clientSecret: env.GITHUB_CLIENT_SECRET,
    }),
    EmailProvider({
      sendVerificationRequest: async ({ identifier, url }) => {
        // Resend é‚®ä»¶å‘é€é€»è¾‘
      },
    }),
  ],
  callbacks: {
    session({ token, session }) {
      // ä¼šè¯å›è°ƒå¤„ç†
    },
    async jwt({ token, user }) {
      // JWT ä»¤ç‰Œå¤„ç†
    },
  },
};
```

#### 3. tRPC è®¤è¯ä¸Šä¸‹æ–‡è¿ç§»
**æ–‡ä»¶**ï¼š`packages/api/src/trpc.ts`
```
// ä¿®æ”¹å‰
import {auth, currentUser, getAuth} from "@clerk/nextjs/server";
type AuthObject = ReturnType<typeof getAuth>;

// ä¿®æ”¹å
import { getToken } from "next-auth/jwt";

export const createTRPCContext = async (opts: {
  headers: Headers;
  req?: NextRequest;
}) => {
  const token = opts.req ? await getToken({ req: opts.req }) : null;
```

### v2.0 - é¦–é¡µä¸å“ç‰Œè®¾è®¡å®ç°
**æ ¸å¿ƒå˜æ›´**ï¼š
- å¤åˆ» https://imageprompt.org/ é¦–é¡µè®¾è®¡
- å»ºç«‹ç»Ÿä¸€çš„å“ç‰Œå½¢è±¡å’Œè§†è§‰è§„èŒƒ
- å®ç°å“åº”å¼é¡µé¢å¸ƒå±€å’Œå›½é™…åŒ–æ”¯æŒ

**æŠ€æœ¯å®ç°**ï¼š

#### 1. ç»„ä»¶æ¶æ„è®¾è®¡
```
// apps/nextjs/src/app/[lang]/(marketing)/page.tsx
export default async function ImagePromptHomePage({
  params: { lang },
}: {
  params: { lang: Locale };
}) {
  const dict = await getDictionary(lang);
  
  return (
    <>
      {/* SEO Metadata */}
      <Metadata 
        title={dict.imageprompt.meta.title}
        description={dict.imageprompt.meta.description}
      />
      
      {/* Hero Section */}
      <ImagePromptHeroSection dict={dict.imageprompt.hero} />
      
      {/* Features Grid */}
      <ImagePromptFeaturesGrid 
        features={dict.imageprompt.features}
        interested={dict.imageprompt.interested}
      />
      
      {/* Tools Suite */}
      <ImagePromptToolsSuite dict={dict.imageprompt.tools} />
    </>
  );
}
```

#### 2. æ ¸å¿ƒç»„ä»¶å®ç°

**HeroSection ç»„ä»¶**:
```
// apps/nextjs/src/components/imageprompt/hero-section.tsx
import { ColourfulText } from "@saasfly/ui/colorful-text";
import { Button } from "@saasfly/ui/button";

interface ImagePromptHeroSectionProps {
  dict: {
    title_prefix: string;
    title_highlight: string;
    subtitle: string;
    cta_primary: string;
    cta_secondary: string;
  };
}

export function ImagePromptHeroSection({ dict }: ImagePromptHeroSectionProps) {
  return (
    <section className="relative w-full py-12 md:py-24 lg:py-32 xl:py-48">
      <div className="container px-4 md:px-6">
        <div className="flex flex-col items-center space-y-4 text-center">
          <div className="space-y-2">
            <h1 className="text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl lg:text-6xl">
              {dict.title_prefix}{" "}
              <ColourfulText text={dict.title_highlight} />
            </h1>
            <p className="mx-auto max-w-[700px] text-gray-500 md:text-xl dark:text-gray-400">
              {dict.subtitle}
            </p>
          </div>
          <div className="space-x-4">
            <Button>{dict.cta_primary}</Button>
            <Button variant="outline">{dict.cta_secondary}</Button>
          </div>
        </div>
      </div>
    </section>
  );
}
```

#### 3. å›½é™…åŒ–å†…å®¹æ‰©å±•
```
{
  "imageprompt": {
    "meta": {
      "title": "ImagePrompt.org - Create Better AI Art",
      "description": "Inspire ideas, Enhance image prompt, Create masterpieces"
    },
    "hero": {
      "title_prefix": "Create Better AI Art with",
      "title_highlight": "Image Prompt", 
      "subtitle": "Inspire ideas, Enhance image prompt, Create masterpieces",
      "cta_primary": "Try it now!",
      "cta_secondary": "Tutorials"
    },
    "features": [
      {
        "id": "image_to_prompt",
        "title": "Image to Prompt",
        "description": "Convert Image to Prompt to generate your own image",
        "icon": "Image"
      },
      {
        "id": "magic_enhance", 
        "title": "Magic Enhance",
        "description": "Transform simple text into detailed, descriptive image prompt",
        "icon": "Wand2"
      },
      {
        "id": "ai_describe",
        "title": "AI Describe Image",
        "description": "Let AI help you understand and analyze any image in detail", 
        "icon": "Eye"
      },
      {
        "id": "ai_generator",
        "title": "AI Image Generator", 
        "description": "Transform your image prompt into stunning visuals with AI-powered generation",
        "icon": "Sparkles"
      }
    ]
  }
}
```

### v3.0 - Image to Prompt æ ¸å¿ƒåŠŸèƒ½é¡µé¢å®ç°
**æ ¸å¿ƒå˜æ›´**ï¼š
- å®ç°Image to Promptæ ¸å¿ƒåŠŸèƒ½é¡µé¢
- æ”¯æŒå¤šç§ä¸Šä¼ æ–¹å¼
- å®ç°æ–‡ä»¶æ ¼å¼éªŒè¯å’Œå¤§å°é™åˆ¶
- å®ç°å¤šè¯­è¨€æ”¯æŒ

**æŠ€æœ¯å®ç°**ï¼š

#### 1. ç»„ä»¶æ¶æ„è®¾è®¡
```
apps/nextjs/src/app/[lang]/(tools)/
â”œâ”€â”€ image-to-prompt/
â”‚   â”œâ”€â”€ page.tsx                      # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ loading.tsx                   # åŠ è½½çŠ¶æ€
â”‚   â”œâ”€â”€ error.tsx                     # é”™è¯¯å¤„ç†
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ image-upload-section.tsx  # ä¸Šä¼ åŒºåŸŸ
â”‚       â”œâ”€â”€ image-preview-section.tsx # é¢„è§ˆåŒºåŸŸ
â”‚       â”œâ”€â”€ feature-tabs.tsx          # åŠŸèƒ½åˆ‡æ¢
â”‚       â”œâ”€â”€ model-selection.tsx       # AIæ¨¡å‹é€‰æ‹©
â”‚       â”œâ”€â”€ language-selector.tsx     # è¯­è¨€é€‰æ‹©å™¨
â”‚       â””â”€â”€ prompt-generator.tsx      # æç¤ºè¯ç”Ÿæˆç»„ä»¶
```

#### 2. ç»„ä»¶å®ç°

**ImageToPromptPage ç»„ä»¶**:
```
// apps/nextjs/src/app/[lang]/(tools)/image-to-prompt/page.tsx
import { generateMetadata } from "@/app/[lang]/(tools)/image-to-prompt/metadata";
import { ImageToPromptClient } from "@/app/[lang]/(tools)/image-to-prompt/client";

export default ImageToPromptClient;

export { generateMetadata };

```

**ImageToPromptClient ç»„ä»¶**:
```
// apps/nextjs/src/app/[lang]/(tools)/image-to-prompt/client.tsx
import { useState } from "react";
import { Icons } from "@saasfly/ui/icons";
import { Button } from "@saasfly/ui/button";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@saasfly/ui/tabs";
import { Separator } from "@saasfly/ui/separator";

import { ImageToPromptHeader } from "@/app/[lang]/(tools)/image-to-prompt/components/image-to-prompt-header";
import { FeatureTabs } from "@/app/[lang]/(tools)/image-to-prompt/components/feature-tabs";
import { ImageUploadSection } from "@/app/[lang]/(tools)/image-to-prompt/components/image-upload-section";
import { ImagePreviewSection } from "@/app/[lang]/(tools)/image-to-prompt/components/image-preview-section";
import { ModelSelection } from "@/app/[lang]/(tools)/image-to-prompt/components/model-selection";
import { PromptGenerator } from "@/app/[lang]/(tools)/image-to-prompt/components/prompt-generator";

export function ImageToPromptClient() {
  const [file, setFile] = useState<File | null>(null);
  const [model, setModel] = useState<string>("general");
  const [language, setLanguage] = useState<string>("english");

  return (
    <div className="container mx-auto px-4 py-8">
      <ImageToPromptHeader />
      <FeatureTabs />
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <ImageUploadSection
          file={file}
          setFile={setFile}
          model={model}
          language={language}
        />
        <ImagePreviewSection file={file} />
      </div>
      <Separator className="my-4" />
      <ModelSelection model={model} setModel={setModel} />
      <PromptGenerator language={language} setLanguage={setLanguage} />
    </div>
  );
}

```


## ç³»ç»Ÿæ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„
```
apps/nextjs/src/app/[lang]/(tools)/
â”œâ”€â”€ image-to-prompt/
â”‚   â”œâ”€â”€ page.tsx                      # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ loading.tsx                   # åŠ è½½çŠ¶æ€
â”‚   â”œâ”€â”€ error.tsx                     # é”™è¯¯å¤„ç†
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ image-upload-section.tsx  # ä¸Šä¼ åŒºåŸŸ
â”‚       â”œâ”€â”€ image-preview-section.tsx # é¢„è§ˆåŒºåŸŸ
â”‚       â”œâ”€â”€ feature-tabs.tsx          # åŠŸèƒ½åˆ‡æ¢
â”‚       â”œâ”€â”€ model-selection.tsx       # AIæ¨¡å‹é€‰æ‹©
â”‚       â”œâ”€â”€ language-selector.tsx     # è¯­è¨€é€‰æ‹©å™¨
â”‚       â””â”€â”€ prompt-generator.tsx      # æç¤ºè¯ç”Ÿæˆç»„ä»¶
```

### ç»„ä»¶æ¶æ„
```
ImageToPromptPage (æœåŠ¡ç«¯ç»„ä»¶) 
â”œâ”€â”€ generateMetadata (SEOå…ƒæ•°æ®)
â””â”€â”€ ImageToPromptClient (å®¢æˆ·ç«¯ç»„ä»¶)
    â”œâ”€â”€ ImageToPromptHeader
    â”œâ”€â”€ FeatureTabs
    â”œâ”€â”€ åŒæ å¸ƒå±€
    â”‚   â”œâ”€â”€ ImageUploadSection
    â”‚   â””â”€â”€ ImagePreviewSection
    â”œâ”€â”€ ModelSelection
    â””â”€â”€ PromptGenerator
```

## æ ¸å¿ƒè®¾è®¡é€»è¾‘

### 1. çŠ¶æ€ç®¡ç†ç­–ç•¥
- **ä¸Šä¼ çŠ¶æ€**: `useState<File | null>(null)`
- **æ¨¡å‹é€‰æ‹©**: `useState<string>("general")`
- **è¯­è¨€é€‰æ‹©**: `useState<string>("english")`
- **ç»„ä»¶é€šä¿¡**: é€šè¿‡propså›è°ƒå‡½æ•°ä¼ é€’çŠ¶æ€

### 2. æ–‡ä»¶ä¸Šä¼ è®¾è®¡
æ”¯æŒå¤šç§ä¸Šä¼ æ–¹å¼ï¼š
- æ‹–æ‹½ä¸Šä¼ 
- æ–‡ä»¶é€‰æ‹©ä¸Šä¼ 
- URLä¸Šä¼ 

éªŒè¯æœºåˆ¶ï¼š
- æ–‡ä»¶æ ¼å¼éªŒè¯ (PNG, JPG, WEBP)
- æ–‡ä»¶å¤§å°é™åˆ¶ (5MB)
- URLæœ‰æ•ˆæ€§æ£€æŸ¥

### 3. UI/UX è®¾è®¡è§„èŒƒ

#### è‰²å½©ç³»ç»Ÿ
- **ä¸»è‰²è°ƒ**: ç´«è‰²ç³» (#8B5CF6, #7C3AED, #6D28D9)
- **çŠ¶æ€è‰²å½©**:
  - æ¿€æ´»çŠ¶æ€: `border-purple-500 bg-purple-50`
  - æ‚¬åœçŠ¶æ€: `hover:border-purple-400`
  - æ–‡å­—è‰²å½©: `text-purple-600`

#### å¸ƒå±€è§„èŒƒ
- **å®¹å™¨**: `container mx-auto px-4 py-8`
- **ç½‘æ ¼**: `grid grid-cols-1 lg:grid-cols-2 gap-8`
- **å¡ç‰‡é—´è·**: `gap-4` (æ¨¡å‹é€‰æ‹©åŒºåŸŸ)
- **å†…è¾¹è·**: `p-4, p-8` (æ ¹æ®ç»„ä»¶å¤§å°)

#### äº¤äº’åŠ¨ç”»
- **è¿‡æ¸¡æ—¶é—´**: `transition-all duration-200`
- **æ‚¬åœæ•ˆæœ**: `hover:shadow-md`
- **æ‹–æ‹½åé¦ˆ**: è¾¹æ¡†é¢œè‰²å’ŒèƒŒæ™¯è‰²å˜åŒ–

### 4. å›½é™…åŒ–è®¾è®¡
ä½¿ç”¨å­—å…¸æ–‡ä»¶ç»“æ„ç®¡ç†å¤šè¯­è¨€å†…å®¹ï¼š
```
{
  "imageToPrompt": {
    "meta": {
      "title": "Free Image to Prompt Generator - ImgPrompt.He",
      "description": "Convert images to detailed AI prompts. Upload your image and generate optimized prompts for Flux, Midjourney, Stable Diffusion and more."
    },
    "header": {
      "title": "Free Image to Prompt Generator",
      "subtitle": "Convert Image to Prompt to generate your own image"
    },
    "tabs": {
      "imageToPrompt": "Image to Prompt",
      "textToPrompt": "Text to Prompt"
    },
    "upload": {
      "dragText": "Upload a photo or drag and drop",
      "formatText": "PNG, JPG, or WEBP up to 5MB",
      "uploadButton": "Upload Image",
      "urlPlaceholder": "Input Image URL"
    },
    "preview": {
      "title": "Image Preview",
      "placeholder": "Your image will show here"
    },
    "models": {
      "general": {
        "title": "General Image Prompt",
        "description": "Natural language description of the image"
      },
      "flux": {
        "title": "Flux",
        "description": "Optimized for state-of-the-art Flux AI models, concise natural language"
      },
      "midjourney": {
        "title": "Midjourney", 
        "description": "Tailored for Midjourney generation with Midjourney parameters"
      },
      "stableDiffusion": {
        "title": "Stable Diffusion",
        "description": "Formatted for Stable Diffusion models"
      }
    },
    "generator": {
      "languageLabel": "Prompt Language:",
      "generateButton": "Generate Prompt",
      "languages": {
        "english": "English",
        "chinese": "ä¸­æ–‡",
        "japanese": "æ—¥æœ¬èª",
        "korean": "í•œêµ­ì–´"
      }
    }
  }
}
```

### 5. å“åº”å¼è®¾è®¡
é‡‡ç”¨ç½‘æ ¼å¸ƒå±€ç³»ç»Ÿï¼š
- ç§»åŠ¨ç«¯: å•åˆ—å¸ƒå±€
- æ¡Œé¢ç«¯: åŒåˆ—å¸ƒå±€
- å¹³æ¿ç«¯: è‡ªé€‚åº”å¸ƒå±€

### 6. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
- **ä»£ç åˆ†å‰²**: ç»„ä»¶çº§åˆ«åˆ†å‰²
- **å›¾æ ‡å¤ç”¨**: æ‰©å±•ç°æœ‰å›¾æ ‡ç³»ç»Ÿ
- **æ ·å¼å¤ç”¨**: 100%å¤ç”¨ç°æœ‰UIç»„ä»¶
- **ç±»å‹å®‰å…¨**: å®Œæ•´TypeScriptæ”¯æŒ

## å¯¹å¤–æ¥å£äº¤äº’è®¾è®¡

### 1. Cozeæ–‡ä»¶ä¸Šä¼ æ¥å£
- **æ¥å£åœ°å€**: `https://api.coze.cn/v1/files/upload`
- **è¯·æ±‚æ–¹æ³•**: POST
- **è¯·æ±‚å¤´**:
  ```
  Authorization: Bearer ${COZE_API_TOKEN}
  Content-Type: multipart/form-data
  ```
- **è¯·æ±‚å‚æ•°**:
  ```typescript
  interface CozeFileUploadRequest {
    file: File; // ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶
  }
  ```
- **å“åº”æ•°æ®**:
  ```typescript
  interface CozeFileUploadResponse {
    code: number;        // çŠ¶æ€ç ï¼Œ0è¡¨ç¤ºæˆåŠŸ
    msg: string;         // çŠ¶æ€æ¶ˆæ¯
    data: {
      file_id: string;   // æ–‡ä»¶IDï¼Œç”¨äºåç»­æ“ä½œ
      file_url: string;  // æ–‡ä»¶è®¿é—®URL
    };
  }
  ```
- **åŠŸèƒ½**: ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶åˆ°Cozeå¹³å°å¹¶è·å–fileId
- **å®‰å…¨æªæ–½**: è®¿é—®ä»¤ç‰Œå­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œä¸åœ¨å‰ç«¯æš´éœ²

### 2. Cozeå·¥ä½œæµè°ƒç”¨æ¥å£
- **æ¥å£åœ°å€**: `https://api.coze.cn/v1/workflow/run`
- **è¯·æ±‚æ–¹æ³•**: POST
- **è¯·æ±‚å¤´**:
  ```
  Authorization: Bearer ${COZE_API_TOKEN}
  Content-Type: application/json
  Accept: application/json
  User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
  ```
- **è¯·æ±‚å‚æ•°**:
  ```typescript
  interface CozeWorkflowRunRequest {
    workflow_id: "7548376142701658148"; // å›ºå®šçš„å·¥ä½œæµID
    parameters: {
      img: {
        file_id: string;     // ä¸Šä¼ æ–‡ä»¶è·å¾—çš„fileId
      };
      promptType: string;    // æç¤ºè¯ç±»å‹ (Normal, Flux, Midjourney, StableDiffusion)
      lang: string;          // æç¤ºè¯è¯­è¨€ (english, chinese, japanese, korean)
    };
  }
  ```
- **å“åº”æ•°æ®**:
  ```typescript
  interface CozeWorkflowRunResponse {
    code: number;           // çŠ¶æ€ç ï¼Œ0è¡¨ç¤ºæˆåŠŸ
    msg: string;            // çŠ¶æ€æ¶ˆæ¯
    data: string;           // JSONå­—ç¬¦ä¸²ï¼Œéœ€è¦è¿›ä¸€æ­¥è§£æ
    debug_url?: string;     // è°ƒè¯•URL
  }
  
  // dataå­—æ®µè§£æåçš„ç»“æ„ç¤ºä¾‹
  interface CozeWorkflowData {
    prompt: string;         // ç”Ÿæˆçš„æç¤ºè¯ç»“æœ
    // å…¶ä»–å¯èƒ½çš„å­—æ®µ
  }
  ```
- **åŠŸèƒ½**: æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ¨¡å‹å’Œä¸Šä¼ çš„fileIdç”Ÿæˆæç¤ºè¯
- **å‚æ•°æ˜ å°„**:
  - General Image Prompt â†’ Normal
  - Flux â†’ Flux
  - Midjourney â†’ Midjourney
  - Stable Diffusion â†’ StableDiffusion
  - è¯­è¨€å‚æ•°æ˜ å°„ï¼šå‰ç«¯è¯­è¨€å€¼ç›´æ¥ä¼ é€’ç»™Cozeæ¥å£çš„langå‚æ•°

### v3.1 - é¦–é¡µæŒ‰é’®è·³è½¬åŠŸèƒ½å®ç°

#### ğŸ“ è¿­ä»£èƒŒæ™¯

ä¸ºæå‡ç”¨æˆ·ä½“éªŒå’ŒåŠŸèƒ½å¯¼èˆªï¼Œéœ€è¦ä¸ºé¦–é¡µçš„ä¸¤ä¸ªæ ¸å¿ƒæŒ‰é’®ï¼ˆ"ç«‹å³è¯•ç”¨"å’Œ"å›¾ç‰‡è½¬æç¤ºè¯"ï¼‰æ·»åŠ è·³è½¬åŠŸèƒ½ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿç›´æ¥ä»é¦–é¡µè®¿é—® Image to Prompt å·¥å…·é¡µé¢ã€‚

#### ğŸ¯ è¿­ä»£ç›®æ ‡

##### æŠ€æœ¯ç›®æ ‡
- ä½¿ç”¨ Next.js Link ç»„ä»¶å®ç°å£°æ˜å¼å¯¼èˆª
- ä¿æŒå›½é™…åŒ–è·¯ç”±æ”¯æŒ
- ç¡®ä¿SEOå‹å¥½æ€§å’Œæ€§èƒ½ä¼˜åŒ–
- ç»´æŒç°æœ‰è®¾è®¡é£æ ¼å’Œäº¤äº’ä½“éªŒ

#### ğŸ”§ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

##### 1. æŠ€æœ¯é€‰å‹åˆ†æ

**æ–¹æ¡ˆé€‰æ‹©**: Next.js Link ç»„ä»¶å£°æ˜å¼å¯¼èˆª

**é€‰æ‹©ç†ç”±**:
- âœ… SEO å‹å¥½ï¼Œæœ‰åŠ©äºé¡µé¢ç´¢å¼•
- âœ… æ€§èƒ½æ›´å¥½ï¼Œæ”¯æŒé¢„åŠ è½½åŠŸèƒ½
- âœ… ç¬¦åˆ Next.js æœ€ä½³å®è·µ
- âœ… ä»£ç ç®€æ´ï¼Œç»´æŠ¤å®¹æ˜“

**å¯¹æ¯”æ–¹æ¡ˆ**: useRouter + onClick äº‹ä»¶å¤„ç†
- âŒ SEO ä¸å‹å¥½
- âŒ æ— é¢„åŠ è½½åŠŸèƒ½
- âŒ å¿…é¡»ä½¿ç”¨å®¢æˆ·ç«¯æ¸²æŸ“

##### 2. ç»„ä»¶æ¶æ„è®¾è®¡

**æ¶‰åŠæ–‡ä»¶**:
```
apps/nextjs/src/app/[lang]/(marketing)/page.tsx          # ä¸»é¡µé¢è°ƒç”¨
components/imageprompt/hero-section.tsx                  # Heroç»„ä»¶å®ç°
```

**æ•°æ®æµè®¾è®¡**:
```
Marketing Page (lang) â†’ Hero Section (dict, lang) â†’ Link Components (/{lang}/image-to-prompt)
```

##### 3. æ ¸å¿ƒå®ç°è®¾è®¡

**ä¸»é¡µé¢è°ƒç”¨ä¿®æ”¹**:
```typescript
// apps/nextjs/src/app/[lang]/(marketing)/page.tsx
export default async function ImagePromptHomePage({
  params: { lang },
}: {
  params: {
    lang: Locale;
  };
}) {
  const dict = await getDictionary(lang);

  return (
    <>
      {/* Hero Section - ä¼ é€’ lang å‚æ•° */}
      <ImagePromptHeroSection 
        dict={dict.imageprompt.hero} 
        lang={lang} 
      />
      
      {/* ... å…¶ä»–ç»„ä»¶ ... */}
    </>
  );
}
```

**Hero ç»„ä»¶æ¥å£æ›´æ–°**:
```typescript
interface ImagePromptHeroSectionProps {
  dict: {
    title_prefix: string;
    title_highlight: string;
    title_suffix: string;
    subtitle: string;
    cta_primary: string;
    cta_secondary: string;
  };
  lang: string; // æ–°å¢è¯­è¨€å‚æ•°
}
```

**Link ç»„ä»¶å®ç°**:
```typescript
"use client";

import Link from "next/link";
import { ColourfulText } from "@saasfly/ui/colorful-text";
import { Button } from "@saasfly/ui/button";

export function ImagePromptHeroSection({ dict, lang }: ImagePromptHeroSectionProps) {
  const targetPath = `/${lang}/image-to-prompt`;

  return (
    <section className="container pt-20 pb-16">
      {/* ... å…¶ä»–å†…å®¹ ... */}
      
      {/* CTA æŒ‰é’®ç»„ */}
      <div className="flex flex-col sm:flex-row gap-4 mb-16">
        <Link href={targetPath} prefetch={true}>
          <Button 
            size="lg" 
            className="bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 text-lg rounded-full w-full"
          >
            {dict.cta_primary}
          </Button>
        </Link>
        
        <Link href={targetPath} prefetch={true}>
          <Button 
            size="lg" 
            variant="outline" 
            className="border-purple-200 text-purple-600 hover:bg-purple-50 px-8 py-3 text-lg rounded-full w-full"
          >
            {dict.cta_secondary}
          </Button>
        </Link>
      </div>
    </section>
  );
}
```

##### 4. å›½é™…åŒ–è·¯ç”±è®¾è®¡

**è·¯ç”±ç»“æ„**:
```
/en/image-to-prompt    # è‹±æ–‡ç‰ˆæœ¬
/zh/image-to-prompt    # ä¸­æ–‡ç‰ˆæœ¬  
/ja/image-to-prompt    # æ—¥æ–‡ç‰ˆæœ¬
/ko/image-to-prompt    # éŸ©æ–‡ç‰ˆæœ¬
```

**å‚æ•°ä¼ é€’æœºåˆ¶**:
- ä»ä¸»é¡µé¢ä¼ é€’ `lang` å‚æ•°
- åœ¨ Hero ç»„ä»¶ä¸­æ„å»ºå®Œæ•´è·¯å¾„
- ç¡®ä¿ä¸ç°æœ‰å›½é™…åŒ–ç»“æ„ä¸€è‡´

##### 5. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

**é¢„åŠ è½½æœºåˆ¶**:
- ä½¿ç”¨ `prefetch={true}` å¯ç”¨é¢„åŠ è½½
- é¼ æ ‡æ‚¬åœæ—¶è‡ªåŠ¨åŠ è½½ç›®æ ‡é¡µé¢
- æå‡é¡µé¢åˆ‡æ¢ä½“éªŒ

**SEO ä¼˜åŒ–**:
- ä½¿ç”¨å£°æ˜å¼ Link ç»„ä»¶
- ç¡®ä¿æœç´¢å¼•æ“å¯ä»¥è¯†åˆ«é“¾æ¥
- æ­£ç¡®ä¼ é€’é¡µé¢æƒé‡

##### 6. é”™è¯¯å¤„ç†æœºåˆ¶

**è·¯ç”±éªŒè¯**:
- ç¡®ä¿ `lang` å‚æ•°æœ‰æ•ˆæ€§
- å¤„ç†æ— æ•ˆè¯­è¨€ä»£ç 
- æä¾›åˆé€‚çš„é™çº§æ–¹æ¡ˆ

**åŠ è½½çŠ¶æ€**:
- é¢„åŠ è½½æ—¶æ˜¾ç¤ºåŠ è½½çŠ¶æ€
- å¤„ç†é¡µé¢åŠ è½½å¤±è´¥æƒ…å†µ
- æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

#### ğŸ¨ UI/UX è®¾è®¡è§„èŒƒ

##### è§†è§‰ä¸€è‡´æ€§
- ä¿æŒæŒ‰é’®ç°æœ‰æ ·å¼å’Œå¸ƒå±€
- ç»´æŒç´«è‰²ä¸»é¢˜è‰²å½©ç³»ç»Ÿ
- ç¡®ä¿å“åº”å¼è®¾è®¡é€‚é…

##### äº¤äº’ä½“éªŒ
- é¼ æ ‡æ‚¬åœæ•ˆæœä¿æŒä¸å˜
- ç‚¹å‡»åé¦ˆä¿æŒä¸€è‡´
- é¡µé¢åˆ‡æ¢åŠ¨ç”»æµç•…

#### ğŸ“Š æŠ€æœ¯æ€§èƒ½æŒ‡æ ‡

##### æ€§èƒ½è¦æ±‚
- é¡µé¢é¢„åŠ è½½ï¼šé¼ æ ‡æ‚¬åœæ—¶é¢„åŠ è½½ç›®æ ‡é¡µé¢
- åˆ‡æ¢é€Ÿåº¦ï¼š< 1ç§’
- å†…å­˜ä½¿ç”¨ï¼šåˆç†çš„é¢„åŠ è½½ç­–ç•¥

##### å…¼å®¹æ€§è¦æ±‚
- æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨
- ç§»åŠ¨ç«¯é€‚é…è‰¯å¥½
- SEOå‹å¥½æ€§

#### ğŸ§ª æµ‹è¯•ç­–ç•¥

##### åŠŸèƒ½æµ‹è¯•
- [ ] æŒ‰é’®ç‚¹å‡»è·³è½¬åŠŸèƒ½æ­£å¸¸
- [ ] å›½é™…åŒ–è·¯ç”±æ­£ç¡®ä¼ é€’
- [ ] é¡µé¢åŠ è½½å’Œåˆ‡æ¢æµç•…
- [ ] æŒ‰é’®æ ·å¼å’Œäº¤äº’æ•ˆæœä¿æŒä¸€è‡´

##### å…¼å®¹æ€§æµ‹è¯•
- [ ] å¤šè¯­è¨€ç‰ˆæœ¬æµ‹è¯•
- [ ] ç§»åŠ¨ç«¯é€‚é…æµ‹è¯•
- [ ] ä¸åŒæµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

##### æ€§èƒ½æµ‹è¯•
- [ ] é¡µé¢é¢„åŠ è½½åŠŸèƒ½éªŒè¯
- [ ] é¡µé¢åˆ‡æ¢é€Ÿåº¦æµ‹è¯•
- [ ] å†…å­˜ä½¿ç”¨ç›‘æ§

#### ğŸ”§ å®æ–½è®¡åˆ’

##### å¼€å‘æ­¥éª¤
1. ä¿®æ”¹ä¸»é¡µé¢è°ƒç”¨ï¼Œä¼ é€’ `lang` å‚æ•°
2. æ›´æ–° Hero ç»„ä»¶æ¥å£å’Œå®ç°
3. ä½¿ç”¨ Link ç»„ä»¶æ›¿æ¢é™æ€æŒ‰é’®
4. æ·»åŠ é¢„åŠ è½½åŠŸèƒ½
5. æµ‹è¯•å¤šè¯­è¨€ç‰ˆæœ¬å…¼å®¹æ€§

##### æµ‹è¯•æ­¥éª¤
1. æœ¬åœ°å¼€å‘ç¯å¢ƒæµ‹è¯•
2. å¤šè¯­è¨€ç‰ˆæœ¬éªŒè¯
3. ç§»åŠ¨ç«¯é€‚é…æµ‹è¯•
4. æ€§èƒ½å’ŒSEOéªŒè¯
5. éƒ¨ç½²ç¯å¢ƒéªŒè¯

#### ğŸ¯ æˆåŠŸéªŒæ”¶æ ‡å‡†

##### åŠŸèƒ½éªŒæ”¶
- [ ] ä¸¤ä¸ªæŒ‰é’®éƒ½èƒ½æ­£ç¡®è·³è½¬åˆ° Image to Prompt é¡µé¢
- [ ] è·³è½¬è·¯å¾„åŒ…å«æ­£ç¡®çš„è¯­è¨€å‚æ•°
- [ ] é¡µé¢åˆ‡æ¢è¿‡ç¨‹æµç•…æ— å¡é¡¿
- [ ] æŒ‰é’®æ ·å¼å’Œäº¤äº’æ•ˆæœä¿æŒä¸å˜

##### æ€§èƒ½éªŒæ”¶
- [ ] é¡µé¢åˆ‡æ¢æ—¶é—´ < 1ç§’
- [ ] é¢„åŠ è½½åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ— å†…å­˜æ³„æ¼é—®é¢˜
- [ ] ç§»åŠ¨ç«¯ä½“éªŒè‰¯å¥½

##### SEOéªŒæ”¶
- [ ] é“¾æ¥å¯è¢«æœç´¢å¼•æ“è¯†åˆ«
- [ ] é¡µé¢æƒé‡æ­£ç¡®ä¼ é€’
- [ ] è·¯ç”±ç»“æ„ç¬¦åˆSEOæœ€ä½³å®è·µ

### 3. å†…éƒ¨APIè·¯ç”±è®¾è®¡
```
apps/nextjs/src/app/api/
â”œâ”€â”€ coze/
â”‚   â”œâ”€â”€ upload/
â”‚   â”‚   â””â”€â”€ route.ts     # Cozeæ–‡ä»¶ä¸Šä¼ APIè·¯ç”±
â”‚   â””â”€â”€ workflow/
â”‚       â””â”€â”€ route.ts     # Cozeå·¥ä½œæµè°ƒç”¨APIè·¯ç”±
```

#### å†…éƒ¨Cozeæ–‡ä»¶ä¸Šä¼ API
- **è·¯ç”±è·¯å¾„**: `/api/coze/upload`
- **è¯·æ±‚æ–¹æ³•**: POST
- **è¯·æ±‚å‚æ•°**:
  ```typescript
  interface InternalCozeUploadRequest {
    image: File; // å‰ç«¯ä¼ é€’çš„å›¾ç‰‡æ–‡ä»¶
  }
  ```
- **å“åº”æ•°æ®**:
  ```typescript
  interface InternalCozeUploadResponse {
    success: boolean;     // ä¸Šä¼ æ˜¯å¦æˆåŠŸ
    fileId?: string;      // æ–‡ä»¶ID (æˆåŠŸæ—¶)
    errorMessage?: string;// é”™è¯¯ä¿¡æ¯ (å¤±è´¥æ—¶)
  }
  ```

#### å†…éƒ¨Cozeå·¥ä½œæµè°ƒç”¨API
- **è·¯ç”±è·¯å¾„**: `/api/coze/workflow`
- **è¯·æ±‚æ–¹æ³•**: POST
- **è¯·æ±‚å‚æ•°**:
  ```typescript
  interface InternalCozeWorkflowRequest {
    fileId: string;         // æ–‡ä»¶ID
    promptType: string;     // æç¤ºè¯ç±»å‹
  }
  ```
- **å“åº”æ•°æ®**:
  ```typescript
  interface InternalCozeWorkflowResponse {
    success: boolean;       // è°ƒç”¨æ˜¯å¦æˆåŠŸ
    prompt?: string;        // ç”Ÿæˆçš„æç¤ºè¯ (æˆåŠŸæ—¶)
    debugUrl?: string;      // è°ƒè¯•URL (æˆåŠŸæ—¶)
    errorMessage?: string;  // é”™è¯¯ä¿¡æ¯ (å¤±è´¥æ—¶)
  }
  ```

## é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### 1. é¡µé¢è®¿é—®æƒé™é—®é¢˜ (v3.0.1)
**é—®é¢˜æè¿°**: Image to Prompté¡µé¢é»˜è®¤éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚

**è§£å†³æ–¹æ¡ˆ**: 
- ä¿®æ”¹ `apps/nextjs/src/utils/nextauth.ts` æ–‡ä»¶
- å°† `/image-to-prompt` è·¯å¾„æ·»åŠ åˆ°å…¬å…±è·¯ç”±åˆ—è¡¨ä¸­
- ä¿æŒä¸å…¶ä»–å…¬å…±é¡µé¢ï¼ˆå¦‚pricingã€docsï¼‰ä¸€è‡´çš„è®¿é—®æ–¹å¼

**å®‰å…¨è€ƒè™‘**:
- ä»…å¼€æ”¾äº†å·¥å…·ä½¿ç”¨é¡µé¢ï¼Œä¸æ¶‰åŠç”¨æˆ·æ•°æ®æˆ–æ•æ„ŸåŠŸèƒ½
- å®é™…çš„AIæœåŠ¡è°ƒç”¨å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ é™æµæˆ–å…¶ä»–ä¿æŠ¤æªæ–½

### 2. å­—å…¸è®¿é—®è·¯å¾„é”™è¯¯ (v3.0.2)
**é—®é¢˜æè¿°**: é¡µé¢å­—å…¸è®¿é—®è·¯å¾„é”™è¯¯ï¼Œå¯¼è‡´é¡µé¢æ— æ³•æ­£å¸¸æ˜¾ç¤ºå†…å®¹ã€‚

**è§£å†³æ–¹æ¡ˆ**:
- ä¿®å¤ `apps/nextjs/src/app/[lang]/(tools)/image-to-prompt/page.tsx` ä¸­çš„å­—å…¸è®¿é—®è·¯å¾„
- å°† `dict.imageToPrompt.meta.title` ä¿®æ”¹ä¸º `dict.imageprompt.imageToPrompt.meta.title`

### 3. Iconsç»„ä»¶å¯¼å…¥æ–¹å¼é”™è¯¯ (v3.0.2)
**é—®é¢˜æè¿°**: Iconsç»„ä»¶å¯¼å…¥æ–¹å¼ä¸æ­£ç¡®ï¼Œå¯¼è‡´å›¾æ ‡æ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚

**è§£å†³æ–¹æ¡ˆ**:
- å°† `import { Icons } from "@saasfly/ui/icons"` ä¿®æ”¹ä¸º `import * as Icons from "@saasfly/ui/icons"`
- ä¿®å¤äº†å¤šä¸ªç›¸å…³ç»„ä»¶æ–‡ä»¶ä¸­çš„å¯¼å…¥æ–¹å¼

### 4. Coze APIåœ°å€ç¡®è®¤ (v3.0.4)
**é—®é¢˜æè¿°**: ç”¨æˆ·åé¦ˆCoze APIåŸŸåå¯èƒ½ä¸æ­£ç¡®ã€‚

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤Coze APIçš„æ­£ç¡®åŸŸåä¸º `api.coze.cn`
- æ£€æŸ¥ä»£ç ä¸­ä½¿ç”¨çš„APIåœ°å€å·²ç»æ˜¯æ­£ç¡®çš„ `https://api.coze.cn/v1/files/upload`
- æ— éœ€è¿›è¡Œä»£ç ä¿®æ”¹

### 5. å·¥ä½œæµè°ƒç”¨é›†æˆ (v3.0.5)
**é—®é¢˜æè¿°**: éœ€è¦é›†æˆCozeå·¥ä½œæµè°ƒç”¨åŠŸèƒ½ï¼Œæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ¨¡å‹ç”Ÿæˆæç¤ºè¯ã€‚

**è§£å†³æ–¹æ¡ˆ**:
- åˆ›å»ºåç«¯APIè·¯ç”±å¤„ç†Cozeå·¥ä½œæµè°ƒç”¨
- åœ¨å‰ç«¯ç»„ä»¶ä¸­è°ƒç”¨æ–°çš„åç«¯API
- æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ¨¡å‹ä¼ é€’å¯¹åº”çš„promptTypeå‚æ•°
- å®‰å…¨åœ°ç®¡ç†Cozeè®¿é—®ä»¤ç‰Œï¼Œå­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­

## API è®¾è®¡

### ç¯å¢ƒå˜é‡éœ€æ±‚
```bash
# AIæœåŠ¡é…ç½®
NEXT_PUBLIC_AI_SERVICE_URL=
AI_SERVICE_API_KEY=

# æ–‡ä»¶å­˜å‚¨é…ç½®
NEXT_PUBLIC_UPLOAD_BUCKET=
UPLOAD_SERVICE_KEY=

# å›¾ç‰‡å¤„ç†é…ç½®
IMAGE_RESIZE_QUALITY=80
IMAGE_MAX_SIZE=5242880  # 5MB

# Cozeå¹³å°é…ç½®
COZE_API_TOKEN=your_coze_api_token
COZE_WORKFLOW_ID=7548376142701658148
```

### åç«¯æœåŠ¡éœ€æ±‚
1. **æ–‡ä»¶ä¸Šä¼ API**
   - æ–‡ä»¶å­˜å‚¨æœåŠ¡
   - å›¾ç‰‡æ ¼å¼è½¬æ¢
   - æ–‡ä»¶å®‰å…¨æ£€æŸ¥

2. **å›¾ç‰‡åˆ†æAPI**
   - AIå›¾ç‰‡è¯†åˆ«æœåŠ¡
   - å¤šæ¨¡å‹æ”¯æŒ
   - æç¤ºè¯ç”Ÿæˆ

## å®‰å…¨è®¾è®¡

### è®¿é—®æ§åˆ¶
- é¡µé¢è®¾ç½®ä¸ºå…¬å…±è®¿é—®ï¼Œæ— éœ€ç™»å½•å³å¯ä½¿ç”¨
- ä¿æŒä¸å…¶ä»–å…¬å…±é¡µé¢ï¼ˆå¦‚pricingã€docsï¼‰ä¸€è‡´çš„è®¿é—®æ–¹å¼

### æ•°æ®å®‰å…¨
- æ–‡ä»¶æ ¼å¼éªŒè¯
- æ–‡ä»¶å¤§å°é™åˆ¶
- å›¾ç‰‡å®‰å…¨æ£€æŸ¥
- APIä»¤ç‰Œå®‰å…¨å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­

### APIè·¯ç”±å®‰å…¨
- Cozeç›¸å…³APIè·¯ç”±ä¸è¿›è¡Œç™»å½•éªŒè¯
- è®¿é—®ä»¤ç‰Œå­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œä¸åœ¨å‰ç«¯æš´éœ²
- é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## éƒ¨ç½²è€ƒè™‘

### CDNé…ç½®
- é™æ€èµ„æºç¼“å­˜
- å›¾ç‰‡ä¼˜åŒ–é…ç½®
- ä¸Šä¼ æ–‡ä»¶çš„ä¸´æ—¶å­˜å‚¨

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æµ‹è¯•
- å›¾ç‰‡é¢„è§ˆç»„ä»¶æµ‹è¯•
- æ¨¡å‹é€‰æ‹©ç»„ä»¶æµ‹è¯•
- è¡¨å•éªŒè¯æµ‹è¯•

### é›†æˆæµ‹è¯•
- ç«¯åˆ°ç«¯ä¸Šä¼ æµç¨‹æµ‹è¯•
- AIæœåŠ¡è°ƒç”¨æµ‹è¯•
- å¤šè¯­è¨€åˆ‡æ¢æµ‹è¯•
- å“åº”å¼å¸ƒå±€æµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- æ–‡ä»¶ä¸Šä¼ æ€§èƒ½æµ‹è¯•
- å¤§å›¾ç‰‡å¤„ç†æµ‹è¯•
- å¹¶å‘è¯·æ±‚æµ‹è¯•
- å†…å­˜æ³„æ¼æµ‹è¯•