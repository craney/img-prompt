# ImagePrompt.He 产品功能需求文档

## 产品概述
**项目名称**：ImagePrompt.org 功能复刻  
**目标用户**：AI 艺术创作者、设计师、内容创作者  
**设计目标**：基于现有 img-prompt 项目架构，复刻 https://imageprompt.org/ 网站功能  

## 迭代版本历史与需求演进

### v1.0 - 认证系统基础架构
**核心需求**：
- 建立稳定的数据库连接系统
- 实现基础的用户认证系统
- 确保生产环境和开发环境的稳定性
- 支持多种认证方式（Email、GitHub等）

**技术需求**：
- 解决数据库连接兼容性问题
- 从 Clerk 迁移到 NextAuth 认证系统
- 实现路由保护机制
- 建立会话管理策略

### v2.0 - 首页与品牌设计
**核心需求**：
- 复刻 https://imageprompt.org/ 首页设计
- 建立统一的品牌形象和视觉规范
- 实现响应式页面布局

**页面结构设计**：

#### 导航栏 (Header)
- **品牌标识**：ImagePrompt.org logo（紫色图标 + 文字）
- **主导航**：Home, Inspiration, Tutorials, Tools, Pricing
- **功能区域**：主题切换、语言切换、Login/Signup 按钮
- **设计特点**：简洁透明背景，紫色主题色调

#### 英雄区域 (Hero Section)
- **主标题**：Create Better AI Art with Image Prompt
- **副标题**：Inspire ideas, Enhance image prompt, Create masterpieces
- **行动按钮**：
  - 主要按钮："Try it now!" (紫色背景)
  - 次要按钮："Tutorials" (紫色边框)
- **背景效果**：浅色渐变背景

#### 核心功能展示区域
**四个主要功能模块**：

1. **Image to Prompt**
   - 图标：图片转换图标（紫色主题）
   - 描述：Convert Image to Prompt to generate your own image

2. **Magic Enhance**
   - 图标：魔法棒图标
   - 描述：Transform simple text into detailed, descriptive image prompt

3. **AI Describe Image**
   - 图标：眼睛图标
   - 描述：Let AI help you understand and analyze any image in detail

4. **AI Image Generator**
   - 图标：星星/闪光图标
   - 描述：Transform your image prompt into stunning visuals with AI-powered generation

#### 相关链接区域
- 引导文字："You may be interested in:"
- 相关链接（紫色超链接样式）

#### 工具套件展示区域
- **主标题**：AI Powered Image Prompt Tools
- **副标题**：A complete suite of AI tools covering every aspect of your image creation journey

### v3.0 - Image to Prompt 核心功能页面

#### 📝 迭代背景

基于 https://imageprompt.org/image-to-prompt 页面截图，开发"图片转提示词"核心功能页面。这是用户从首页点击"Image to Prompt"功能卡片后跳转的目标页面，是整个产品的核心功能之一。

#### 🎯 迭代目标

##### 产品目标
- 实现完整的"Free Image to Prompt Generator"功能页面
- 提供直观的图片上传和预览体验
- 支持多种AI模型的提示词生成选项
- 建立规范化的功能页面布局模式

##### 技术目标
- 基于现有架构实现文件上传功能
- 集成图片预处理和显示组件
- 建立AI服务调用的基础框架
- 确保响应式设计和国际化支持

##### 用户体验目标
- 简洁直观的操作流程
- 实时的图片预览反馈
- 清晰的功能选项说明
- 流畅的交互动画效果

#### 🖼️ 页面设计要求

根据提供的截图，页面包含以下主要区域：

##### 1. 页面头部区域
- **主标题**: "Free Image to Prompt Generator" (大号粗体)
- **副标题**: "Convert Image to Prompt to generate your own image" (灰色描述文字)
- **语言切换提示**: "Would you like to switch to 简体中文?" (右上角)

##### 2. 功能切换标签
- **"Image to Prompt"** (当前激活状态，紫色图标)

##### 3. 左侧上传区域
- **上传框**: 紫色虚线边框的大型拖拽区域
- **上传图标**: 紫色上传图标 (↑)
- **操作提示**: "Upload a photo or drag and drop"
- **格式说明**: "PNG, JPG, or WEBP up to 5MB"
- **上传按钮**: "Upload Image" (灰色按钮)
- **URL输入**: "Input Image URL" (文本输入框)

##### 4. 右侧预览区域
- **预览标题**: "Image Preview"
- **占位图标**: 灰色图片占位符
- **占位文字**: "Your image will show here"

##### 5. AI模型选择区域
四个选项卡，第一个为激活状态：

1. **General Image Prompt** ✓ (激活状态)
   - 描述: "Natural language description of the image"

2. **Flux**
   - 描述: "Optimized for state-of-the-art Flux AI models, concise natural language"

3. **Midjourney**
   - 描述: "Tailored for Midjourney generation with Midjourney parameters"

4. **Stable Diffusion**
   - 描述: "Formatted for Stable Diffusion models"

##### 6. 底部操作区域
- **语言选择**: "Prompt Language: English" (下拉选择)
- **生成按钮**: "Generate Prompt" (紫色按钮)
- **版本信息**: "Version: NEXT" (右下角标识)

#### 🔧 功能需求分析

##### 前端组件需求
1. **文件上传组件**
   - 支持拖拽上传
   - 文件格式验证 (PNG, JPG, WEBP)
   - 文件大小限制 (5MB)
   - URL上传选项

2. **图片预览组件**
   - 图片展示和缩放
   - 加载状态显示
   - 错误处理

3. **模型选择组件**
   - 单选卡片组
   - 状态切换动画
   - 描述信息展示

4. **语言选择组件**
   - 下拉选择器
   - 多语言选项 (English, 中文, 日本語, 한국어)

##### 后端API需求
1. **文件上传API**
   - 文件存储服务
   - 图片格式转换
   - 文件安全检查

2. **图片分析API**
   - AI图片识别服务
   - 多模型支持
   - 提示词生成

3. **多语言支持**
   - 提示词翻译
   - 本地化内容

#### 🎨 UI/UX 设计规范

##### 色彩系统
- **主色调**: 紫色系 (#8B5CF6, #7C3AED, #6D28D9)
- **状态色彩**:
  - 激活状态: `border-purple-500 bg-purple-50`
  - 悬停状态: `hover:border-purple-400`
  - 文字色彩: `text-purple-600`

##### 布局规范
- **容器**: `container mx-auto px-4 py-8`
- **网格**: `grid grid-cols-1 lg:grid-cols-2 gap-8`
- **卡片间距**: `gap-4` (模型选择区域)
- **内边距**: `p-4, p-8` (根据组件大小)

##### 交互动画
- **过渡时间**: `transition-all duration-200`
- **悬停效果**: `hover:shadow-md`
- **拖拽反馈**: 边框颜色和背景色变化

#### 🌍 国际化支持

支持多语言切换，包括：
- English (英语)
- 中文 (简体中文)
- 日本語 (日语)
- 한국어 (韩语)

#### 📊 技术性能指标

##### 文件上传性能
- **文件大小限制**: 5MB
- **支持格式**: PNG, JPG, WEBP
- **上传超时**: 30秒
- **并发上传**: 1个文件

##### 图片处理性能
- **预览生成**: < 1秒
- **格式转换**: < 2秒  
- **缩略图生成**: 300x300px

##### AI处理性能
- **提示词生成**: < 10秒
- **多模型支持**: 4种模型选项
- **错误重试**: 最多3次

#### 🧪 测试策略

##### 单元测试
- [ ] 文件上传组件测试
- [ ] 图片预览组件测试
- [ ] 模型选择组件测试
- [ ] 表单验证测试

##### 集成测试
- [ ] 端到端上传流程测试
- [ ] AI服务调用测试
- [ ] 多语言切换测试
- [ ] 响应式布局测试

##### 性能测试
- [ ] 文件上传性能测试
- [ ] 大图片处理测试
- [ ] 并发请求测试
- [ ] 内存泄漏测试

#### 🚀 部署考虑

##### 环境变量需求
```bash
# AI服务配置
NEXT_PUBLIC_AI_SERVICE_URL=
AI_SERVICE_API_KEY=

# 文件存储配置
NEXT_PUBLIC_UPLOAD_BUCKET=
UPLOAD_SERVICE_KEY=

# 图片处理配置
IMAGE_RESIZE_QUALITY=80
IMAGE_MAX_SIZE=5242880  # 5MB
```

##### CDN配置
- 静态资源缓存
- 图片优化配置
- 上传文件的临时存储

#### 🎯 成功验收标准

##### 功能验收
- [ ] 文件拖拽上传正常工作
- [ ] URL图片上传正常工作
- [ ] 图片预览正确显示
- [ ] 模型选择状态切换正常
- [ ] 语言选择器功能正常
- [ ] 生成按钮交互正常

##### 视觉验收
- [ ] 页面布局与截图90%+相似
- [ ] 紫色主题色调一致
- [ ] 响应式适配良好
- [ ] 交互动画流畅

##### 性能验收
- [ ] 页面加载时间< 3秒
- [ ] 文件上传响应< 5秒
- [ ] Lighthouse性能分数> 85
- [ ] 无明显的UI卡顿

#### 🔄 后续迭代计划

##### v3.1 - AI服务集成
- [ ] 集成实际的AI图片识别服务
- [ ] 实现提示词生成功能
- [ ] 添加生成结果展示

##### v3.2 - 功能增强
- [ ] 添加批量上传支持
- [ ] 实现提示词编辑功能
- [ ] 添加历史记录功能

##### v3.3 - 用户体验优化
- [ ] 添加拖拽排序功能
- [ ] 实现实时预览
- [ ] 优化移动端体验

#### 🔧 版本更新需求

##### v3.0.1 - 公共访问配置
- 移除Image to Prompt页面的登录限制
- 提升工具的可访问性和用户体验
- 保持与其他公共页面（如pricing、docs）一致的访问方式

##### v3.0.2 - 错误修复和优化
- 修复字典访问路径错误
- 修复Icons组件导入方式错误
- 确保页面所有功能正常运行

##### v3.0.3 - Coze平台集成
- 实现文件上传到Coze平台的功能
- 在上传完成后显示文件ID并提供复制功能
- 提供用户友好的上传界面和反馈

##### v3.0.4 - Coze工作流集成
- 实现Coze工作流调用功能
- 根据用户选择的模型生成对应的提示词
- 保持用户界面样式不变